<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>太陽光・蓄電池 提案シミュレーター（カード別設定対応）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="app-header">
    <h1>太陽光・蓄電池 提案シミュレーター</h1>
    <div class="header-actions">
      <label class="file">
        <input type="file" id="configFile" accept="application/json" />
        <span>料金/FIT 等の設定JSONを読み込む</span>
      </label>
      <label class="file">
        <input type="file" id="pricingFile" accept="application/json" />
        <span>価格モデルJSONを読み込む</span>
      </label>
      <button id="exportAllBtn">現在の設定を書き出し</button>
      <button id="resetBtn" class="muted">初期化</button>
    </div>
  </header>

  <main class="layout">
    <!-- 左：新規カードの初期値（既存カードは影響を受けない） -->
    <aside id="leftPanel" class="panel">
      <h2>新規カードの初期値</h2>

      <section class="group">
        <label class="lbl">プラン種別</label>
        <label><input type="radio" name="g_planType" value="standard" checked /> 従量電灯系</label>
        <label><input type="radio" name="g_planType" value="smart" /> スマートライフ系</label>
      </section>

      <section class="group">
        <label class="lbl">太陽光の有無</label>
        <label><input type="radio" name="g_hasPV" value="true" /> あり</label>
        <label><input type="radio" name="g_hasPV" value="false" checked /> なし</label>
        <div id="g_existingWrap" hidden>
          <label>既設PV容量（kW）<input type="number" id="g_existingPvKW" min="0" max="11.5" step="0.1" value="0"></label>
        </div>
      </section>

      <section class="group">
        <label class="lbl">電力規模の入力方法</label>
        <select id="g_scaleMode">
          <option value="kwh">年間使用量（kWh/年）</option>
          <option value="yen">年間電気代（円/年）</option>
          <option value="household">世帯人数（人）</option>
        </select>
        <div id="g_scaleInputs">
          <div data-mode="kwh">
            <label>年間使用量（kWh）<input type="number" id="g_annualKWh" min="0" step="0.1" value="5200"></label>
          </div>
          <div data-mode="yen" hidden>
            <label>年間電気代（円）<input type="number" id="g_annualBill" min="0" step="100" value="180000"></label>
          </div>
          <div data-mode="household" hidden>
            <label>世帯人数<input type="number" id="g_household" min="1" max="8" step="1" value="4"></label>
          </div>
        </div>
      </section>

      <section class="group">
        <label class="lbl">日中使用割合（%）</label>
        <input type="range" id="g_dayRatio" min="0" max="100" step="1" value="25" />
        <div class="hint">目安：日中不在 15%／標準 25%／子育て 35%</div>
      </section>

      <section class="group">
        <label class="lbl">FIT開始年（西暦）<input type="number" id="g_fitStartYear" min="2012" max="2030" step="1" value="2024"></label>
        <label>FIT残存年数（年）<input type="number" id="g_fitYearsLeft" min="0" max="10" step="1" value="10"></label>
      </section>

      <section class="group">
        <label class="lbl">評価年数（年）</label>
        <input type="number" id="g_evalYears" min="1" max="30" step="1" value="15" />
      </section>

      <section class="group">
        <button id="addCard">カードを作成</button>
        <div class="hint">※ここを変更しても既存カードは変わりません</div>
      </section>
    </aside>

    <!-- 右：カード一覧 -->
    <section class="content">
      <div id="cards" class="cards"></div>

      <div id="compareTableWrap" class="compare-wrap" hidden>
        <h2>比較表</h2>
        <div id="compareTable"></div>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <span>v0.2 • 各カードは独立設定／PV上限11.5kW／既設PV入力可／真の回収年表示</span>
  </footer>

  <script src="./app.js"></script>
</body>
</html>
